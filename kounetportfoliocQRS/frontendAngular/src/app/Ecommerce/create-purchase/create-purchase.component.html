<div class="create-purchase-container">
  <h2>Créer un achat</h2>
  <form [formGroup]="purchaseForm" (ngSubmit)="onSubmit()">
    <div>
      <label for="supplierId">Fournisseur :</label>
      <select id="supplierId" formControlName="supplierId">
        <option [value]="null">-- Sélectionner --</option>
        <option *ngFor="let s of suppliers" [value]="s.id">
          {{ s.fullname }} ({{ s.city }})
        </option>
      </select>
      <div class="error" *ngIf="purchaseForm.get('supplierId')?.invalid && purchaseForm.get('supplierId')?.touched">
        Champ requis
      </div>
    </div>
    
  
    <div>
      <label for="status">Statut :</label>
      <input id="status" formControlName="status" type="text"/>
      <div class="error" *ngIf="purchaseForm.get('status')?.invalid && purchaseForm.get('status')?.touched">
        Champ requis
      </div>
    </div>
    <div>
      <label for="total">Total :</label>
      <input id="total" formControlName="total" type="number" min="0" step="0.01"/>
      <div class="error" *ngIf="purchaseForm.get('total')?.invalid && purchaseForm.get('total')?.touched">
        Total requis (≥ 0)
      </div>
    </div>
    <div>
      <button type="submit" [disabled]="isLoading">Créer</button>
      <span *ngIf="isLoading">Création en cours...</span>
    </div>
    <div class="success" *ngIf="successMsg">{{ successMsg }}</div>
    <div class="error" *ngIf="errorMsg">{{ errorMsg }}</div>
  </form>
</div>